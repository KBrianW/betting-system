<!DOCTYPE html>
<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= assigns[:page_title] || "BetZone" %></title>
    <meta name="csrf-token" content={get_csrf_token()} />
    <.live_title suffix=" ¬∑ BetZone"> 
      <%= assigns[:page_title] || "BetZone" %>
    </.live_title>
    <link phx-track-static rel="stylesheet" href={~p"/assets/app.css"} />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cabin:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">
    <script phx-track-static type="text/javascript" src={~p"/assets/app.js"}></script>
  </head>
  <body class="min-h-screen w-full m-0 p-0 font-cabin text-sm bg-orange-50">
    <header class="px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between border-b border-zinc-100 py-3 text-sm">
        <div class="flex items-center gap-4">
          <a href="/">
            <img src="/images/logo.svg" width="36" />
          </a>
          <p class="bg-brand/5 text-brand rounded-full px-2 font-medium leading-6">
            BetZone
          </p>
        </div>
        <div class="flex items-center gap-4">
          <%= if @current_user do %>
            <button phx-click="show_bets" class="flex items-center gap-1 text-gray-700 hover:text-gray-900">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" />
                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd" />
              </svg>
              <span>My Bets</span>
            </button>
            <button phx-click="show_history" class="flex items-center gap-1 text-gray-700 hover:text-gray-900">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" />
              </svg>
              <span>History</span>
            </button>
            <div class="flex items-center gap-1 text-gray-700">
              <span class="text-gray-700 font-semibold">Hello, <%= @current_user.first_name %></span>
            </div>
            <form method="post" action="/users/log_out">
              <input type="hidden" name="_csrf_token" value={get_csrf_token()} />
              <button type="submit" class="w-full bg-black text-white px-4 py-2 rounded font-semibold transition hover:bg-brand">Log out</button>
            </form>
          <% else %>
            <a href="/users/log_in" class="px-3 py-1 rounded bg-gray-800 text-white hover:bg-brand transition">Login</a>
            <a href="/users/register" class="px-3 py-1 rounded bg-gray-800 text-white hover:bg-brand transition">Register</a>
          <% end %>
        </div>
      </div>
    </header>
    <div class="flex h-[calc(100vh-4rem)]">
      <!-- Left Panel -->
      <div id="left-panel" class="w-64 bg-gray-50 border-r border-gray-200 shadow-sm transition-all duration-300 ease-in-out">
        <div class="p-4">
          <h2 class="text-lg font-semibold text-gray-900 mb-4">Sports</h2>
          <nav class="space-y-1">
            <!-- All Sports Button -->
            <button
              phx-click="show_all_sports"
              class="w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors duration-200 hover:bg-orange-50 hover:text-orange-600 group border-b border-gray-200 mb-2"
            >
              <span class="text-xl">üèÜ</span>
              <span class="font-medium text-gray-700 group-hover:text-orange-600">All Sports</span>
            </button>
            
            <%= if assigns[:sports] do %>
              <%= for sport <- @sports do %>
                <button
                  phx-click="filter_by_sport"
                  phx-value-sport_id={sport.id}
                  class="w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors duration-200 hover:bg-orange-50 hover:text-orange-600 group"
                >
                  <span class="text-xl"><%= sport.emoji || "üéØ" %></span>
                  <span class="font-medium text-gray-700 group-hover:text-orange-600"><%= sport.name %></span>
                </button>
              <% end %>
            <% else %>
              <button class="w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors duration-200 hover:bg-orange-50 hover:text-orange-600 group">
                <span class="text-xl">‚öΩ</span>
                <span class="font-medium text-gray-700 group-hover:text-orange-600">Football</span>
              </button>
            <% end %>
          </nav>
        </div>
      </div>

      <!-- Main Content -->
      <main class="flex-1 overflow-auto">
        <div class="px-4 py-4">
          <div class="mx-auto max-w-4xl">
            <.flash_group flash={@flash} />
            <%= @inner_content %>
          </div>
        </div>
      </main>
    </div>
  </body>
</html>